# 线上接口负载剧增，快扛不住了，如何处理


遇到这样的问题，我们的第一反应应该是增加缓存。因为，增加缓存是解决系统性能问题最快速、最高效的方案，它能够快速提升系统的线性吞吐量，效果也最为明显。这就相当于是用空间来换取时间。曾经有人说过，缓存是解决性能问题的万金油，哪里存在性能瓶颈，就往哪里加缓存。


但是程序都已经上线了，增加缓存还来得及吗？因为在增加缓存时需要改代码，所以，临时解决方案就是增加节点。随后，将程序紧急部署到新的节点上，在流量入口增加限流和分发。但是增加节点自然会增加成本，所以增加缓存才是最优的解决方案。


缓存的设计思想在架构设计中十分常见。比如我们每天用的操作系统，不管是Windows、Linux，还是Mac OS都有系统缓存、用户缓存。磁盘有磁盘缓存区、CPU有CPU缓存区。再比如，在我们常用的经典框架中，也经常使用到缓存，Spring有IoC缓存，MyBatis有一级缓存、二级缓存。在架构设计中，可以说缓存无处不在。


因此，当并发量过高扛不住的时候，可以优先采用缓存来缓解负载压力。比如**将读取频繁的数据写到缓存中，将动态页面静态化**。在加上缓存之后，如果负载压力依然过大，则再考虑增加限流策略，比如消息队列；如果在增加限流后还是压力过大，则再考虑**增加服务器节点**。

> 来源：https://mp.weixin.qq.com/s/C2G-xvvDlnz6-tvaJit1TA
