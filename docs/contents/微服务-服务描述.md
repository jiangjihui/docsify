# 服务描述

开发web服务最古老的方式是先开发web应用，然后添加web服务作为一种备用的接口。

> 来源：《互联网创业核心技术-构建可伸缩的web应用》

## Web服务类型

### 以功能为中心的服务

曾经有很多以功能为中心的技术，不过这么多年过去了，SOAP（简单对象访问协议）一支独秀，部分源于几家最大的科技公司的支持，比如微软、IBM。

SOAP最常见的实现方案是使用XML作为描述和消息编码的方式，通过HTTP在客户端和服务器之间传递请求和响应。SOAP最重要的一个特性是允许web服务基于自身的约定描述完成服务发现并生成集成代码。

Web服务提供者暴露一组 XML资源，诸如Web服务定义语言( WSDL)文件、XML模式定义(XSD)文件、WSDL描述方法与可用的终端信息，XSD描述请求与响应中用到的数据结构。这些资源文件就是Web服务的约定，客户端代码如何生成，Web服务如何调用，这些必要的信息全部都在这些资源文件中。举个例子，如果你用Java开发，那么你可以用专门的工具和库下载资源文件，然后生成Java本地客户端代码。这些代码就是一些 Java类，可以被编译并用在应用程序中。在这些代码的背后，会依赖到SOAP相关的一些库， 封装了数据序列化、身份认证、路由、错误处理等各种实现细节。客户端代码无须知道自己调用的是远程Web服务，只需要简单依赖基于Web服务约定( WSDL和XSD文件)生成的Java库就可以了。

但是动态语言如：php、python等和SOAP web 服务集成会比较困难。所以web需要一种SOAP的替代技术，可以更容易的集成，更方便的实现。这就使得JSON—基于REST风格的服务流行起来。

> SOAP已经不再是Web服务开发的主流技术，开发的复杂性和维护的工作量相当大。



### 以资源为中心的服务

开发Web服务的一个替代方案就是将服务的关注点从功能转移到资源上。以功能为中心的Web服务，每个功能都需要若干个参数，产生若干个结果值;以资源为中心的Web服务，每个资源都代表一类对象， 这些对象上面只能执行有限的操作(可以创建、删除、更新、获取资源)。资源的模型可以是任意的，但是和资源的交互是标准的。

REST是一个面向资源架构风格的方案，早在2000年初就已经提出来。此后，由于其简单性和轻量级的开发模型，逐渐变成Web应用集成事实上的标准。

**REST：表征状态转移**（Representational State Transfer），采用Web 服务使用标准的 HTTP 方法 (GET/PUT/POST/DELETE) 将所有 Web 系统的服务抽象为资源，REST从资源的角度来观察整个网络，分布在各处的资源由URI确定，而客户端的应用通过URI来获取资源的表征。Http协议所抽象的get,post,put,delete就好比数据库中最基本的增删改查，而互联网上的各种资源就好比数据库中的记录（可能这么比喻不是很好），对于各种资源的操作最后总是能抽象成为这四种基本操作，在定义了定位资源的规则以后，对于资源的操作通过标准的Http协议就可以实现，开发者也会受益于这种轻量级的协议。REST是一种软件架构风格而非协议也非规范，是一种针对网络应用的开发方式，可以降低开发的复杂性，提高系统的可伸缩性。

REST 是一种强制的客户端/服务端架构设计模型，客户端基于服务端管理的一系列资源操作。服务端提供修改或获取资源的接口。所有的通信必须是无状态和可缓存的。REST 关注于暴露数据。它减少了客户端／服务端的耦合程度，经常用于公共 HTTP API 接口设计。REST 使用更通常与规范化的方法来通过 URI 暴露资源，通过 header 来表述并通过 GET、POST、PUT、DELETE 和 PATCH 这些动作来进行操作。因为无状态的特性，REST 易于横向扩展和隔离。

RESTful 接口有四条规则：

- 标志资源（HTTP 里的 URI） ── 无论什么操作都使用同一个URI。
- 表示的改变（HTTP 的动作） ── 使用动作, headers 和body。
- 可自我描述的错误信息（HTTP 中的 status code）──使用状态码，不要重新造轮子。
- HATEOAS（HTTP 中的HTML 接口） ── 你的 web 服务器应该能够通过浏览器访问。